(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/tabbar-1/editActive/randomMode/randomMode"],{"2b3a":function(t,i,e){},"2de1":function(t,i,e){"use strict";var o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("view",{staticClass:"body"},[e("view",{staticClass:"title"},[t._v("活动名称")]),e("view",{staticClass:"activeName"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.activeName,expression:"activeName"}],staticStyle:{width:"90%",margin:"auto"},attrs:{type:"text",value:t.activeName,placeholder:"请输入活动名称",eventid:"044c9742-0"},domProps:{value:t.activeName},on:{input:[function(i){i.target.composing||(t.activeName=i.target.value)},t.setTitle]}})]),e("view",{staticClass:"title"},[t._v("活动内容")]),t._m(0),0==t.ads.length?e("view",{staticClass:"add_img"},[e("view",{staticStyle:{margin:"auto","margin-left":"50rpx"}},[t._v("添加广告图片")]),e("image",{attrs:{src:"../../../../../static/img/addImg.png",eventid:"044c9742-1"},on:{click:t.add_img}}),e("view",{staticStyle:{margin:"auto","margin-left":"50rpx","margin-top":"0"}},[t._v("输入广告链接")]),e("textarea",{staticStyle:{width:"85%",margin:"auto","margin-left":"70rpx","margin-top":"0",color:"#007AFF",height:"100rpx"},attrs:{type:"text",value:"",placeholder:"请输入广告推文链接"}})]):e("view",[t._l(t.ads,function(i,o){return e("view",{key:i.index,staticClass:"add_img"},[e("view",{staticStyle:{margin:"auto","margin-left":"50rpx"}},[t._v("图片"+t._s(o+1))]),e("image",{staticStyle:{width:"85%"},attrs:{src:i.img,eventid:"044c9742-2-"+o},on:{click:t.add_img}}),e("view",{staticStyle:{margin:"auto","margin-left":"50rpx","margin-top":"0"}},[t._v("广告链接"+t._s(o+1))]),e("textarea",{staticStyle:{width:"85%",margin:"auto","margin-left":"70rpx","margin-top":"0",color:"#007AFF",height:"100rpx"},attrs:{type:"text",value:i.link,placeholder:"请输入广告推文链接",id:o,eventid:"044c9742-3-"+o},on:{input:t.setLink}})])}),e("view",{staticClass:"add_reward",staticStyle:{"margin-top":"40rpx"}},[e("image",{attrs:{src:"../../../../../static/img/addStore.png",eventid:"044c9742-4"},on:{click:t.add_img}}),e("text",[t._v("继续添加广告图片")])])],2),e("view",{staticClass:"title",staticStyle:{"margin-top":"50rpx"}},[t._v("优惠设置")]),t.couponList.length>0?e("view",{},t._l(t.couponList,function(i,o){return e("view",{key:o},[e("view",{staticStyle:{width:"90%",display:"flex","justify-content":"space-between",margin:"auto","align-items":"center",height:"100rpx"}},[e("text",[t._v("优惠"+t._s(o+1))]),e("button",{staticStyle:{margin:"0"},attrs:{type:"default",size:"mini",eventid:"044c9742-5-"+o},on:{click:function(i){t.modify(o)}}},[t._v("修改")])],1),1==i.modifyDiscount?e("view",[e("view",{staticClass:"add_reward2"},[e("view",{staticClass:"couponImg"},[e("view",{staticClass:"left"},[e("text",{staticStyle:{margin:"auto"}},[t._v(t._s(i.organization))]),e("text",{staticStyle:{"font-size":"x-large",margin:"auto","margin-top":"0"}},[t._v(t._s(i.couponName))])]),e("view",{staticClass:"right"},[1==i.disable?e("button",{staticStyle:{background:"#BBBBBB"},attrs:{size:"mini"}},[t._v("查看详情")]):e("button",{attrs:{size:"mini",eventid:"044c9742-6-"+o},on:{click:function(e){t.toDetail(i+1)}}},[t._v("查看详情")])],1)]),e("text",{staticStyle:{"padding-top":"20rpx",color:"#BBBBBB"}},[t._v("券预览图")]),e("view",{staticStyle:{width:"90%","padding-top":"20rpx"}},[t._v("填写相关信息")]),e("view",{staticClass:"inputs"},[e("text",{staticStyle:{width:"20%"}},[t._v("券名：")]),e("input",{staticStyle:{width:"85%","border-bottom":"1px solid #F2F2F2"},attrs:{type:"text",value:i.couponName,placeholder:"请输入券名",id:o+1,eventid:"044c9742-7-"+o},on:{input:t.setName}})]),e("view",{staticClass:"inputs"},[e("view",{staticStyle:{width:"30%"}},[t._v("中奖概率：")]),e("input",{staticStyle:{width:"70%","border-bottom":"1px solid #F2F2F2"},attrs:{type:"text",value:i.probability,placeholder:"请输入该券中奖概率",id:o+1,eventid:"044c9742-8-"+o},on:{input:t.setProbability}})]),e("view",{staticClass:"inputs"},[e("view",{staticStyle:{width:"30%"}},[t._v("数量上限：")]),e("input",{staticStyle:{width:"70%","border-bottom":"1px solid #F2F2F2"},attrs:{type:"text",value:i.toplimit,placeholder:"请输入该券数量上限",id:o+1,eventid:"044c9742-9-"+o},on:{input:t.setToplimit}})]),e("view",{staticClass:"inputs"},[e("view",{staticStyle:{width:"30%"}},[t._v("发券时间：")]),e("input",{staticStyle:{width:"70%","border-bottom":"1px solid #F2F2F2"},attrs:{type:"text",value:i.publishTime,placeholder:"请输入优惠券发送时间",id:o+1,eventid:"044c9742-10-"+o},on:{input:t.setPTime}})]),e("view",{staticClass:"inputs"},[e("view",{staticStyle:{width:"30%"}},[t._v("有效日期：")]),e("input",{staticStyle:{width:"70%","border-bottom":"1px solid #F2F2F2"},attrs:{type:"text",value:i.exTime,placeholder:"请输入优惠券有效日期",id:o+1,eventid:"044c9742-11-"+o},on:{input:t.setETime}})]),e("view",{staticClass:"inputs"},[e("view",{staticStyle:{width:"30%"}},[t._v("可用时间：")]),e("input",{staticStyle:{width:"70%","border-bottom":"1px solid #F2F2F2"},attrs:{type:"text",value:i.availableTime,placeholder:"请输入优惠券可用时间",id:o+1,eventid:"044c9742-12-"+o},on:{input:t.setATime}})]),e("view",{staticClass:"inputs"},[e("view",{staticStyle:{width:"30%"}},[t._v("发券机构：")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.couponList[o].organization,expression:"couponList[index].organization"}],attrs:{eventid:"044c9742-13-"+o},on:{change:function(i){var e=Array.prototype.filter.call(i.target.options,function(t){return t.selected}).map(function(t){var i="_value"in t?t._value:t.value;return i});t.couponList[o].organization=i.target.multiple?e:e[0]}}},[e("option",{staticStyle:{display:"none"},attrs:{value:"volvo"}},[t._v("请选择机构")]),t._l(t.organizationList,function(i,o){return e("option",{key:i.company_id,attrs:{value:i.company_name}},[t._v(t._s(i.company_name))])})],2)]),e("view",{staticClass:"inputs",staticStyle:{"align-items":"flex-start"}},[e("view",{staticStyle:{width:"30%"}},[t._v("使用规则：")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:i.rule,expression:"item.rule"}],staticStyle:{width:"70%","border-bottom":"1px solid #F2F2F2"},attrs:{type:"text","auto-height":"true",placeholder:"请输入使用规则",id:o+1,eventid:"044c9742-14-"+o},domProps:{value:i.rule},on:{input:[function(t){t.target.composing||(i.rule=t.target.value)},t.setRule]}},[t._v('<s:property :value="item.rule"/>')])]),e("button",{staticClass:"btn",attrs:{eventid:"044c9742-15-"+o},on:{click:function(i){t.save(o)}}},[t._v("确定")])],1)]):e("view",[e("view",{staticClass:"add_reward"},[e("view",{staticClass:"couponImg"},[e("view",{staticClass:"left"},[e("text",{staticStyle:{margin:"auto"}},[t._v(t._s(i.organization))]),e("text",{staticStyle:{"font-size":"x-large",margin:"auto","margin-top":"0"}},[t._v(t._s(i.couponName))])]),e("view",{staticClass:"right"},[1==i.disable?e("button",{staticStyle:{background:"#BBBBBB"},attrs:{size:"mini"}},[t._v("查看详情")]):e("button",{attrs:{size:"mini",eventid:"044c9742-16-"+o},on:{click:function(i){t.toDetail(o+1)}}},[t._v("查看详情")])],1)])])])])})):t._e(),e("view",{staticStyle:{width:"90%",display:"flex","justify-content":"space-between",margin:"auto","align-items":"center",height:"100rpx"}},[e("text",[t._v("优惠"+t._s(t.couponList.length+1))])]),0==t.coupon.modifyDiscount?e("view",{staticClass:"add_reward",attrs:{eventid:"044c9742-27"},on:{click:t.add_discount}},[e("image",{attrs:{src:"../../../../../static/img/addReward.png"}}),e("text",[t._v("添加奖励")])]):e("view",{staticClass:"add_reward2"},[e("view",{staticClass:"couponImg"},[e("view",{staticClass:"left"},[e("text",{staticStyle:{margin:"auto"}},[t._v(t._s(t.coupon.organization))]),e("text",{staticStyle:{"font-size":"x-large",margin:"auto","margin-top":"0"}},[t._v(t._s(t.coupon.couponName))])]),e("view",{staticClass:"right"},[1==t.coupon.disable?e("button",{staticStyle:{background:"#BBBBBB"},attrs:{size:"mini"}},[t._v("查看详情")]):e("button",{attrs:{size:"mini",eventid:"044c9742-17"},on:{click:function(i){t.toDetail(0)}}},[t._v("查看详情")])],1)]),e("text",{staticStyle:{"padding-top":"20rpx",color:"#BBBBBB"}},[t._v("券预览图")]),e("view",{staticStyle:{width:"90%","padding-top":"20rpx"}},[t._v("填写相关信息")]),e("view",{staticClass:"inputs"},[e("text",{staticStyle:{width:"20%"}},[t._v("券名：")]),e("input",{staticStyle:{width:"85%","border-bottom":"1px solid #F2F2F2"},attrs:{type:"text",value:"",placeholder:"请输入券名",id:"0",eventid:"044c9742-18"},on:{input:t.setName}})]),e("view",{staticClass:"inputs"},[e("view",{staticStyle:{width:"30%"}},[t._v("中奖概率：")]),e("input",{staticStyle:{width:"70%","border-bottom":"1px solid #F2F2F2"},attrs:{type:"text",value:"",placeholder:"请输入该券中奖概率",id:"0",eventid:"044c9742-19"},on:{input:t.setProbability}})]),e("view",{staticClass:"inputs"},[e("view",{staticStyle:{width:"30%"}},[t._v("数量上限：")]),e("input",{staticStyle:{width:"70%","border-bottom":"1px solid #F2F2F2"},attrs:{type:"text",value:"",placeholder:"请输入该券数量上限",id:"0",eventid:"044c9742-20"},on:{input:t.setToplimit}})]),e("view",{staticClass:"inputs"},[e("view",{staticStyle:{width:"30%"}},[t._v("发券时间：")]),e("input",{staticStyle:{width:"70%","border-bottom":"1px solid #F2F2F2"},attrs:{type:"text",value:"",placeholder:"请输入优惠券发送时间",id:"0",eventid:"044c9742-21"},on:{input:t.setPTime}})]),e("view",{staticClass:"inputs"},[e("view",{staticStyle:{width:"30%"}},[t._v("有效日期：")]),e("input",{staticStyle:{width:"70%","border-bottom":"1px solid #F2F2F2"},attrs:{type:"text",value:"",placeholder:"请输入优惠券有效日期",id:"0",eventid:"044c9742-22"},on:{input:t.setETime}})]),e("view",{staticClass:"inputs"},[e("view",{staticStyle:{width:"30%"}},[t._v("可用时间：")]),e("input",{staticStyle:{width:"70%","border-bottom":"1px solid #F2F2F2"},attrs:{type:"text",value:"",placeholder:"请输入优惠券可用时间",id:"0",eventid:"044c9742-23"},on:{input:t.setATime}})]),e("view",{staticClass:"inputs"},[e("view",{staticStyle:{width:"30%"}},[t._v("发券机构：")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.coupon.organization,expression:"coupon.organization"}],attrs:{eventid:"044c9742-24"},on:{change:function(i){var e=Array.prototype.filter.call(i.target.options,function(t){return t.selected}).map(function(t){var i="_value"in t?t._value:t.value;return i});t.coupon.organization=i.target.multiple?e:e[0]}}},[e("option",{staticStyle:{display:"none"},attrs:{value:"volvo"}},[t._v("请选择机构")]),t._l(t.organizationList,function(i,o){return e("option",{key:i.company_id,attrs:{value:i.company_name}},[t._v(t._s(i.company_name))])})],2)]),e("view",{staticClass:"inputs",staticStyle:{"align-items":"flex-start"}},[e("view",{staticStyle:{width:"30%"}},[t._v("使用规则：")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.coupon.rule,expression:"coupon.rule"}],staticStyle:{width:"70%","border-bottom":"1px solid #F2F2F2"},attrs:{type:"text",value:"","auto-height":"true",placeholder:"请输入使用规则",id:"0",eventid:"044c9742-25"},domProps:{value:t.coupon.rule},on:{input:[function(i){i.target.composing||(t.coupon.rule=i.target.value)},t.setRule]}})]),e("button",{staticClass:"btn",attrs:{eventid:"044c9742-26"},on:{click:t.addCoupon}},[t._v("确定")])],1),t.couponList.length>0?e("view",{staticStyle:{width:"80%",display:"flex","justify-content":"space-between",margin:"auto","margin-top":"100rpx"}},[e("button",{staticClass:"btnSave",attrs:{size:"default"}},[t._v("保存")]),e("button",{staticClass:"btnCreate",attrs:{size:"default",disabled:t.readyToUpdate,eventid:"044c9742-28"},on:{click:t.createActive}},[t._v("创建活动")])],1):t._e(),e("xy-dialog",{ref:"xyDialog02",attrs:{title:"false",message:"确定创建？",eventid:"044c9742-29",mpcomid:"044c9742-0"},on:{cancelButton:t.handleClose,confirmButton:t.handleConfirm}}),e("view",{staticClass:"title"})],1)},n=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("view",{staticClass:"preview"},[e("view",{staticClass:"preview_img"}),e("view",{staticClass:"preview_text"},[t._v("预览图")])])}];e.d(i,"a",function(){return o}),e.d(i,"b",function(){return n})},"6ae9":function(t,i,e){"use strict";e.r(i);var o=e("2de1"),n=e("8acb");for(var a in n)"default"!==a&&function(t){e.d(i,t,function(){return n[t]})}(a);e("a07f");var s=e("2877"),l=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,null,null);i["default"]=l.exports},"8acb":function(t,i,e){"use strict";e.r(i);var o=e("e0bd"),n=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(i,t,function(){return o[t]})}(a);i["default"]=n.a},a07f:function(t,i,e){"use strict";var o=e("2b3a"),n=e.n(o);n.a},a9c3:function(t,i,e){"use strict";e("7caf");var o=a(e("b0ce")),n=a(e("6ae9"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,o.default)(n.default))},e0bd:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=s(e("b5d0")),n=s(e("be61")),a=s(e("fc86"));function s(t){return t&&t.__esModule?t:{default:t}}var l={data:function(){return{activeName:"",ads:[],coupon:{couponName:"请输入券名",probability:"",toplimit:"",publishTime:"",availableTime:"",exTime:"",organization:"请输入发券机构",rule:"",disable:!0,modifyDiscount:!1},organizationList:[],couponList:[],readyToUpdate:!0}},components:{xyDialog:o.default},onLoad:function(){},created:function(){var i=this;this.coupon.organization="请输入发券机构",t.request({url:n.default.usersCompany(),header:{token:a.default.getToken()},success:function(e){console.log(e),200==e.data.code?i.organizationList=e.data.value:t.showToast({title:"获取发券机构列表失败",icon:"none"})}})},methods:{jump:function(i){console.log(i),0==i.currentTarget.id?t.navigateTo({url:""}):(i.currentTarget.id,t.navigateTo({url:""}))},add_discount:function(){this.coupon.modifyDiscount=!0},setTitle:function(t){this.activeName=t.detail.value,console.log(this.activeName),this.activeName.length>0&&this.ads.length>0&&this.couponList.length>0?this.readyToUpdate=!1:this.readyToUpdate=!0},add_img:function(){var i=this;t.chooseImage({success:function(t){var e=t.tempFilePaths,o={img:e[0]};i.ads.push(o)}}),this.activeName.length>0&&this.ads.length>0&&this.couponList.length>0?this.readyToUpdate=!1:this.readyToUpdate=!0},setLink:function(t){this.ads[t.currentTarget.id].link=t.detail.value,this.activeName.length>0&&this.ads.length>0&&this.couponList.length>0?this.readyToUpdate=!1:this.readyToUpdate=!0},setName:function(t){if(console.log(t),0==t.currentTarget.id)this.coupon.couponName=t.detail.value,this.coupon.couponName.length>0&&this.coupon.probability.length>0&&this.coupon.toplimit.length>0&&this.coupon.publishTime.length>0&&"请输入券名"!=this.coupon.couponName&&this.coupon.availableTime.length>0&&this.coupon.exTime.length>0&&"请输入发券机构"!=this.coupon.organization&&this.coupon.organization.length>0&&this.coupon.rule.length>0?this.coupon.disable=!1:this.coupon.disable=!0;else{var i=t.currentTarget.id-1;console.log(i),this.couponList[i].couponName=t.detail.value,this.couponList[i].couponName.length>0&&this.couponList[i].probability.length>0&&this.couponList[i].toplimit.length>0&&this.couponList[i].publishTime.length>0&&"请输入券名"!=this.couponList[i].couponName&&this.couponList[i].availableTime.length>0&&this.couponList[i].exTime.length>0&&"请输入发券机构"!=this.couponList[i].organization&&this.couponList[i].organization.length>0&&this.couponList[i].rule.length>0?this.couponList[i].disable=!1:this.couponList[i].disable=!0}},setProbability:function(t){if(console.log(t),0==t.currentTarget.id)this.coupon.probability=t.detail.value,this.coupon.couponName.length>0&&this.coupon.probability.length>0&&this.coupon.toplimit.length>0&&this.coupon.publishTime.length>0&&"请输入券名"!=this.coupon.couponName&&this.coupon.availableTime.length>0&&this.coupon.exTime.length>0&&"请输入发券机构"!=this.coupon.organization&&this.coupon.organization.length>0&&this.coupon.rule.length>0?this.coupon.disable=!1:this.coupon.disable=!0;else{var i=t.currentTarget.id-1;console.log(i),this.couponList[i].probability=t.detail.value,this.couponList[i].couponName.length>0&&this.couponList[i].probability.length>0&&this.couponList[i].toplimit.length>0&&this.couponList[i].publishTime.length>0&&"请输入券名"!=this.couponList[i].couponName&&this.couponList[i].availableTime.length>0&&this.couponList[i].exTime.length>0&&"请输入发券机构"!=this.couponList[i].organization&&this.couponList[i].organization.length>0&&this.couponList[i].rule.length>0?this.couponList[i].disable=!1:this.couponList[i].disable=!0}},setToplimit:function(t){if(console.log(t),0==t.currentTarget.id)this.coupon.toplimit=t.detail.value,this.coupon.couponName.length>0&&this.coupon.probability.length>0&&this.coupon.toplimit.length>0&&this.coupon.publishTime.length>0&&"请输入券名"!=this.coupon.couponName&&this.coupon.availableTime.length>0&&this.coupon.exTime.length>0&&"请输入发券机构"!=this.coupon.organization&&this.coupon.organization.length>0&&this.coupon.rule.length>0?this.coupon.disable=!1:this.coupon.disable=!0;else{var i=t.currentTarget.id-1;console.log(i),this.couponList[i].toplimit=t.detail.value,this.couponList[i].couponName.length>0&&this.couponList[i].probability.length>0&&this.couponList[i].toplimit.length>0&&this.couponList[i].publishTime.length>0&&"请输入券名"!=this.couponList[i].couponName&&this.couponList[i].availableTime.length>0&&this.couponList[i].exTime.length>0&&"请输入发券机构"!=this.couponList[i].organization&&this.couponList[i].organization.length>0&&this.couponList[i].rule.length>0?this.couponList[i].disable=!1:this.couponList[i].disable=!0}},setPTime:function(t){if(console.log(t),0==t.currentTarget.id)this.coupon.publishTime=t.detail.value,this.coupon.couponName.length>0&&this.coupon.probability.length>0&&this.coupon.toplimit.length>0&&this.coupon.publishTime.length>0&&"请输入券名"!=this.coupon.couponName&&this.coupon.availableTime.length>0&&this.coupon.exTime.length>0&&"请输入发券机构"!=this.coupon.organization&&this.coupon.organization.length>0&&this.coupon.rule.length>0?this.coupon.disable=!1:this.coupon.disable=!0;else{var i=t.currentTarget.id-1;console.log(i),this.couponList[i].publishTime=t.detail.value,this.couponList[i].couponName.length>0&&this.couponList[i].probability.length>0&&this.couponList[i].toplimit.length>0&&this.couponList[i].publishTime.length>0&&"请输入券名"!=this.couponList[i].couponName&&this.couponList[i].availableTime.length>0&&this.couponList[i].exTime.length>0&&"请输入发券机构"!=this.couponList[i].organization&&this.couponList[i].organization.length>0&&this.couponList[i].rule.length>0?this.couponList[i].disable=!1:this.couponList[i].disable=!0}},setATime:function(t){if(0==t.currentTarget.id)this.coupon.availableTime=t.detail.value,this.coupon.couponName.length>0&&"请输入券名"!=this.coupon.couponName&&this.coupon.probability.length>0&&this.coupon.toplimit.length>0&&this.coupon.publishTime.length>0&&this.coupon.availableTime.length>0&&this.coupon.exTime.length>0&&"请输入发券机构"!=this.coupon.organization&&this.coupon.organization.length>0&&this.coupon.rule.length>0?this.coupon.disable=!1:this.coupon.disable=!0;else{var i=t.currentTarget.id-1;this.couponList[i].availableTime=t.detail.value,this.couponList[i].couponName.length>0&&"请输入券名"!=this.couponList[i].couponName&&this.couponList[i].probability.length>0&&this.couponList[i].toplimit.length>0&&this.couponList[i].publishTime.length>0&&this.couponList[i].availableTime.length>0&&this.couponList[i].exTime.length>0&&"请输入发券机构"!=this.couponList[i].organization&&this.couponList[i].organization.length>0&&this.couponList[i].rule.length>0?this.couponList[i].disable=!1:this.couponList[i].disable=!0}},setETime:function(t){if(0==t.currentTarget.id)this.coupon.exTime=t.detail.value,this.coupon.couponName.length>0&&"请输入券名"!=this.coupon.couponName&&this.coupon.probability.length>0&&this.coupon.toplimit.length>0&&this.coupon.publishTime.length>0&&this.coupon.availableTime.length>0&&this.coupon.exTime.length>0&&"请输入发券机构"!=this.coupon.organization&&this.coupon.organization.length>0&&this.coupon.rule.length>0?this.coupon.disable=!1:this.coupon.disable=!0;else{var i=t.currentTarget.id-1;this.couponList[i].exTime=t.detail.value,this.couponList[i].couponName.length>0&&"请输入券名"!=this.couponList[i].couponName&&this.couponList[i].availableTime.length>0&&this.couponList[i].probability.length>0&&this.couponList[i].toplimit.length>0&&this.couponList[i].publishTime.length>0&&this.couponList[i].exTime.length>0&&"请输入发券机构"!=this.couponList[i].organization&&this.couponList[i].organization.length>0&&this.couponList[i].rule.length>0?this.couponList[i].disable=!1:this.couponList[i].disable=!0}},setRule:function(t){if(0==t.currentTarget.id)this.coupon.rule=t.detail.value,this.coupon.couponName.length>0&&"请输入券名"!=this.coupon.couponName&&this.coupon.availableTime.length>0&&this.coupon.probability.length>0&&this.coupon.toplimit.length>0&&this.coupon.publishTime.length>0&&this.coupon.exTime.length>0&&"请输入发券机构"!=this.coupon.organization&&this.coupon.organization.length>0&&this.coupon.rule.length>0?this.coupon.disable=!1:this.coupon.disable=!0;else{var i=t.currentTarget.id-1;this.couponList[i].rule=t.detail.value,this.couponList[i].couponName.length>0&&"请输入券名"!=this.couponList[i].couponName&&this.couponList[i].probability.length>0&&this.couponList[i].toplimit.length>0&&this.couponList[i].publishTime.length>0&&this.couponList[i].availableTime.length>0&&this.couponList[i].exTime.length>0&&"请输入发券机构"!=this.couponList[i].organization&&this.couponList[i].organization.length>0&&this.couponList[i].rule.length>0?this.couponList[i].disable=!1:this.couponList[i].disable=!0}},toDetail:function(i){0==i?t.navigateTo({url:"randomCoupon?detail="+JSON.stringify(this.coupon)+"&ads="+JSON.stringify(this.ads)}):(i--,console.log(i),t.navigateTo({url:"randomCoupon?detail="+JSON.stringify(this.couponList[i])+"&ads="+JSON.stringify(this.ads)}))},addCoupon:function(){0==this.coupon.disable?(this.coupon.modifyDiscount=!1,this.couponList.push(this.coupon),this.coupon={couponName:"请输入券名",availableTime:"",publishTime:"",toplimit:"",probability:"",exTime:"",organization:"请输入发券机构",rule:"",disable:!0,modifyDiscount:!1}):t.showToast({title:"请填写完整信息",icon:"none"}),this.activeName.length>0&&this.ads.length>0&&this.couponList.length>0?this.readyToUpdate=!1:this.readyToUpdate=!0},modify:function(t){this.couponList[t].modifyDiscount=!0},save:function(t){this.couponList[t].modifyDiscount=!1},createActive:function(){this.$refs.xyDialog02.alert()},handleClose:function(){console.log("点击关闭按钮"),t.showToast({title:"点击关闭按钮,触发自定义事件",icon:"none"})},handleConfirm:function(){var i=this;console.log("点击确定按钮");for(var e=0,o=0;o<i.couponList.length;o++)console.log(i.couponList[o].probability),e+=parseFloat(i.couponList[o].probability);if(console.log(e),e>1)t.showToast({title:"中奖总概率不能超过100%",icon:"none"});else for(var s=0;s<i.couponList.length;s++){console.log(s);var l=0;for(o=0;o<i.organizationList.length;o++)i.organizationList[o].company_name==i.couponList[s].organization&&function(){console.log(s),l=i.organizationList[o].company_id;var e=s;t.request({url:n.default.companyActivity(),method:"POST",header:{"content-type":"application/x-www-form-urlencoded",token:a.default.getToken()},data:{name:i.activeName,companyId:l},success:function(o){console.log(o),200==o.data.code?(i.activityId=o.data.value.activity_id,console.log(e),t.request({url:n.default.company(),method:"POST",header:{"content-type":"application/x-www-form-urlencoded",token:a.default.getToken()},data:{companyId:l,activityId:i.activityId,name:i.couponList[e].couponName,state:"奖励",vaildDays:"",typeName:0,probability:i.couponList[e].probability},success:function(i){console.log(i),1==i.data.status?t.showToast({title:"第"+e+"个活动创建成功"}):t.showToast({title:"第"+e+"个您没有权限进行创建!",icon:"none"})}})):t.showToast({title:"第"+e+"个获取活动id失败",icon:"none"})}})}()}},handleAlert02:function(){this.$refs.xyDialog02.alert()}}};i.default=l}).call(this,e("543d")["default"])}},[["a9c3","common/runtime","common/vendor"]]]);