(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/tabbar-1/selectAndpush/selectCoupons/selectCoupons"],{"0e9f":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(r("5b1e")),n=i(r("fc86")),s=i(r("be61"));function i(e){return e&&e.__esModule?e:{default:e}}var c={components:{timeTemplate:a.default},data:function(){return{valueStart:"2018-01-01 00:00:00",valueEnd:"2020-01-01 00:00:00",showed:!1,checkedBottom:!0,number:0,repeat:0,companyId:"1",startTime:"",endTime:"",cyid:[],couponsInfor:{},customers:[{number:"1",title:"发布时间：",checked:!0,ending:""},{number:"",placeholderName:"0",title:"点赞数达到",checked:!1,ending:"个"},{number:"",placeholderName:"0",title:"点赞数前",checked:!1,ending:"名"}]}},onLoad:function(e){var t=this;t.couponsInfor=JSON.parse(e.couponsInfor),console.log(t.couponsInfor),t.companyId=t.couponsInfor.companyId},methods:{bindChangeStart:function(e){this.valueStart=e},bindChangeEnd:function(e){this.valueEnd=e},switchchecked:function(e){this.customers[e].checked=!this.customers[e].checked,console.log(this.customers[e].checked)},checkedbottom:function(){this.checkedBottom=!this.checkedBottom},readySelect:function(){var t=this;for(var r in this.customers)1==this.customers[r].checked&&(""==this.customers[r].number&&(this.customers[r].number=this.customers[r].placeholderName),console.log(this.customers[r].number));console.log(this.valueStart),console.log(this.valueEnd),this.startTime=Math.round(new Date(this.valueStart.replace(/\-/g,"/"))/1e3),this.endTime=Math.round(new Date(this.valueEnd.replace(/\-/g,"/"))/1e3),console.log(this.startTime),console.log(this.endTime),console.log(this.customers[1].number),console.log(this.customers[2].number),console.log(this.checkedBottom),console.log(this.companyId),e.request({url:s.default.screenUser(),method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",token:n.default.getToken()},data:{companyId:this.companyId,start:this.startTime,end:this.endTime,upNo:this.customers[2].number,upNum:this.customers[1].number,repeat:this.checkedBottom},success:function(r){if(console.log(r),200==r.data.code){for(var a in t.showed=!0,t.cyid.length=0,r.data.value.result)t.cyid.push(r.data.value.result[a].cyid);t.number=r.data.value.number,t.repeat=r.data.value.repeat,console.log(t.cyid)}else 16e3==r.data.code&&e.showToast({title:"发布时间为必填内容",duration:2e3,icon:"none"})}})},renewClick:function(){this.showed=!1},submit:function(){var t=this;e.navigateTo({url:"./select/select?cyid="+JSON.stringify(t.cyid)+"&couponsInfor="+JSON.stringify(t.couponsInfor)})}}};t.default=c}).call(this,r("543d")["default"])},"144c":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("picker",{staticClass:"time-template rui-class",attrs:{mode:"multiSelector",range:e.times,value:e.timesIndex,disabled:e.curDisabled,eventid:"77ab023f-0"},on:{change:e.changeDate,cancel:e.cancelDate,columnchange:e.columnchangeDate}},[e._v(e._s(e.curValue))])},n=[];r.d(t,"a",function(){return a}),r.d(t,"b",function(){return n})},"45b8":function(e,t,r){"use strict";r.r(t);var a=r("0e9f"),n=r.n(a);for(var s in a)"default"!==s&&function(e){r.d(t,e,function(){return a[e]})}(s);t["default"]=n.a},"484f":function(e,t,r){"use strict";r.r(t);var a=r("bc49"),n=r("45b8");for(var s in n)"default"!==s&&function(e){r.d(t,e,function(){return n[e]})}(s);r("bddd");var i=r("2877"),c=Object(i["a"])(n["default"],a["a"],a["b"],!1,null,"7f9cf35d",null);t["default"]=c.exports},"49fb":function(e,t,r){"use strict";function a(e){return i(e)||s(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var c={withData:function(e){var t=parseInt(e);return t<10?"0"+t:""+t},getTimes:function(e){return new Date(e.replace(/-/g,"/")).getTime()},getCurrentTimes:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1,a=e.getDate(),n=e.getHours(),s=e.getMinutes(),i=e.getSeconds();return{detail:{year:t,month:r,day:a,hour:n,minute:s,second:i}}},format:function(e){var t=[],r=[],a="";return e.forEach(function(e,a){var n=c.withData(e);a>2?t.push(n):r.push(n)}),a=e.length<4?r.join("-"):r.join("-")+" "+t.join(":"),a},getCurrentStringValue:function(e){var t=e.split(" ");if(t&&t[1]){var r=[].concat(a(t[0].split("-")),a(t[1].split(":")));return r}return t[0].split("-")},getCompare:function(e,t,r,a){var n=c.getTimes(e),s=c.getTimes(t),i=c.getTimes(r);return n<s?c.getTimeIndex(a,c.getCurrentStringValue(t)):n>i?c.getTimeIndex(a,c.getCurrentStringValue(r)):c.getTimeIndex(a,c.getCurrentStringValue(e))},getChooseArr:function(e,t){var r=[];return e.forEach(function(e,a){return r.push(e[t[a]])}),r},getNewArray:function(e){var t=[];return e.forEach(function(e){return t.push(e)}),t},getLoopArray:function(e,t){e=e||0,t=t||1;for(var r=[],a=e;a<=t;a++)r.push(c.withData(a));return r},getMonthDay:function(e,t){var r=e%400==0||e%4==0&&e%100!=0,a=null;switch(t){case"01":case"03":case"05":case"07":case"08":case"10":case"12":a=c.getLoopArray(1,31);break;case"04":case"06":case"09":case"11":a=c.getLoopArray(1,30);break;case"02":a=r?c.getLoopArray(1,29):c.getLoopArray(1,28);break;default:a="月份格式不正确，请重新输入！"}return a},getDateTimes:function(e){var t=c.getLoopArray(e.start,e.end),r=c.getLoopArray(1,12),a=c.getMonthDay(e.curyear,e.curmonth),n=c.getLoopArray(0,23),s=c.getLoopArray(0,59),i=c.getLoopArray(0,59),u=null;switch(e.fields){case"year":u=[t];break;case"month":u=[t,r];break;case"day":u=[t,r,a];break;case"hour":u=[t,r,a,n];break;case"minute":u=[t,r,a,n,s];break;case"second":u=[t,r,a,n,s,i];break;default:u=[t,r,a,n,s,i]}return u},getIndex:function(e,t){for(var r=e.length,a=0;a<r;a++)if(e[a]==t)return a},getTimeIndex:function(e,t){for(var r=e.length,a=[],n=0;n<r;n++)a.push(c.getIndex(e[n],t[n]));return a},error:function(e){console.error(e)}};e.exports=c},"5b1e":function(e,t,r){"use strict";r.r(t);var a=r("144c"),n=r("e2e0");for(var s in n)"default"!==s&&function(e){r.d(t,e,function(){return n[e]})}(s);r("8af3");var i=r("2877"),c=Object(i["a"])(n["default"],a["a"],a["b"],!1,null,null,null);t["default"]=c.exports},"656c":function(e,t,r){"use strict";r("7caf");var a=s(r("b0ce")),n=s(r("484f"));function s(e){return e&&e.__esModule?e:{default:e}}Page((0,a.default)(n.default))},"75da":function(e,t,r){},"8af3":function(e,t,r){"use strict";var a=r("75da"),n=r.n(a);n.a},"9c5b":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("49fb"));function n(e){return e&&e.__esModule?e:{default:e}}var s={name:"time-template",props:{start:{type:String,default:"1900-00-00 00:00:00"},end:{type:String,default:"2500-12-30 23:59:59"},value:{type:String,default:""},fields:{type:String,default:"second"},disabled:{type:Boolean,default:!1}},data:function(){return{times:[["2019","2020"],["01","02"]],timesIndex:[1,1],timesString:null,curValue:this.value,curDisabled:this.disabled,cancel:null}},watch:{value:function(e){this.curValue=e},disabled:function(e){this.curDisabled=e},curDisabled:function(e){this.curDisabled=e},curValue:function(e){this.curValue=e,this.$emit("change",e)},times:function(e){this.times=e},timesIndex:function(e){this.timesIndex=e},cancel:function(e){this.$emit("cancel",e)}},created:function(){if(""===this.value){var e=a.default.getCurrentTimes(),t=[];for(var r in e.detail)if(t.push(e.detail[r]),r===this.fields)break;this.value=a.default.format(t),this.curValue=a.default.format(t)}switch(this.fields){case"year":if(4!==this.value.length)return a.default.error("时间粒度和时间格式不一致"),this.curDisabled=!0,!1;if(4!==this.start.length)return a.default.error("时间粒度和开始时间格式不一致"),this.curDisabled=!0,!1;if(4!==this.end.length)return a.default.error("时间粒度和结束时间格式不一致"),this.curDisabled=!0,!1;break;case"month":if(7!==this.value.length)return a.default.error("时间粒度和时间格式不一致"),this.curDisabled=!0,!1;if(7!==this.start.length)return a.default.error("时间粒度和开始时间格式不一致"),this.curDisabled=!0,!1;if(7!==this.end.length)return a.default.error("时间粒度和结束时间格式不一致"),this.curDisabled=!0,!1;break;case"day":if(10!==this.value.length)return a.default.error("时间粒度和时间格式不一致"),this.curDisabled=!0,!1;if(10!==this.start.length)return a.default.error("时间粒度和开始时间格式不一致"),this.curDisabled=!0,!1;if(10!==this.end.length)return a.default.error("时间粒度和结束时间格式不一致"),this.curDisabled=!0,!1;break;case"hour":if(13!==this.value.length)return a.default.error("时间粒度和时间格式不一致"),this.curDisabled=!0,!1;if(13!==this.start.length)return a.default.error("时间粒度和开始时间格式不一致"),this.curDisabled=!0,!1;if(13!==this.end.length)return a.default.error("时间粒度和结束时间格式不一致"),this.curDisabled=!0,!1;break;case"minute":if(16!==this.value.length)return a.default.error("时间粒度和时间格式不一致"),this.curDisabled=!0,!1;if(16!==this.start.length)return a.default.error("时间粒度和开始时间格式不一致"),this.curDisabled=!0,!1;if(16!==this.end.length)return a.default.error("时间粒度和结束时间格式不一致"),this.curDisabled=!0,!1;break;case"second":if(19!==this.value.length)return a.default.error("时间粒度和时间格式不一致"),this.curDisabled=!0,!1;if(19!==this.start.length)return a.default.error("时间粒度和开始时间格式不一致"),this.curDisabled=!0,!1;if(19!==this.end.length)return a.default.error("时间粒度和结束时间格式不一致"),this.curDisabled=!0,!1;break;default:a.default.error("时间粒度不存在");break}this.value.split(" ");var n=a.default.getCurrentStringValue(this.value);if(a.default.getTimes(this.value)<a.default.getTimes(this.start))return a.default.error("默认时间不能小于开始时间"),this.curDisabled=!0,!1;if(a.default.getTimes(this.value)>a.default.getTimes(this.end))return a.default.error("默认时间不能大于开始时间"),this.curDisabled=!0,!1;var s=a.default.getDateTimes({start:this.start.substring(0,4),end:this.end.substring(0,4),curyear:this.value.substring(0,4),curmonth:this.value.substring(5,7),fields:this.fields}),i=a.default.getTimeIndex(s,n),c=[];i.forEach(function(e){return c.push(e)}),this.times=s,this.timesIndex=i,this.timesString=c},methods:{changeDate:function(e){for(var t=e.detail.value,r=this.times,n=[],s=0,i=t.length;s<i;s++)n.push(r[s][t[s]]);var c=a.default.format(n);this.curValue=c},columnchangeDate:function(e){if("year"===this.fields||"month"===this.fields){var t=a.default.getNewArray(this.timesIndex);return t[e.detail.column]=e.detail.value,this.timesIndex=t,!1}if(0===e.detail.column||1===e.detail.column){var r=a.default.getNewArray(this.times),n=a.default.getNewArray(this.timesIndex);n[e.detail.column]=e.detail.value;var s=a.default.getMonthDay(r[0][n[0]],r[1][n[1]]);r[2]=s,n[2]>s.length-1&&(n[2]=s.length-1),this.times=r,this.timesIndex=n}else{var i=a.default.getNewArray(this.timesIndex);i[e.detail.column]=e.detail.value,this.timesIndex=i}},cancelDate:function(e){this.cancel=e}}};t.default=s},a2ae:function(e,t,r){},bc49:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("view",{staticClass:"dialog"},[r("view",{staticClass:"content"},[r("text",{staticClass:"text-content"},[e._v("请填写筛选条件:")]),r("checkbox-group",{attrs:{mpcomid:"3780d02a-2"}},[r("view",{staticClass:"content-main-1"},[r("view",{staticClass:"time-wrapper"},[r("checkbox",{attrs:{checked:e.customers[0].checked,eventid:"3780d02a-0"},on:{click:function(t){e.switchchecked(0)}}}),e._v(e._s(e.customers[0].title))],1),r("view",{staticClass:"time-wrapper",staticStyle:{"margin-top":"20rpx"}},[r("text",[e._v("开始时间：")]),r("time-template",{attrs:{fields:"second",start:"2010-01-01 00:00:00",end:"2030-12-30 23:59:59",value:e.valueStart,eventid:"3780d02a-1",mpcomid:"3780d02a-0"},on:{change:e.bindChangeStart}})],1),r("view",{staticClass:"time-wrapper",staticStyle:{"margin-top":"20rpx"}},[r("text",[e._v("结束时间：")]),r("time-template",{attrs:{fields:"second",start:"2010-01-01 00:00:00",end:"2030-12-30 23:59:59",value:e.valueEnd,eventid:"3780d02a-2",mpcomid:"3780d02a-1"},on:{change:e.bindChangeEnd}})],1)]),r("view",{staticClass:"content-main"},[r("checkbox",{attrs:{checked:e.customers[1].checked,eventid:"3780d02a-3"},on:{click:function(t){e.switchchecked(1)}}}),e._v(e._s(e.customers[1].title)),r("view",{staticClass:"input-wrapper"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.customers[1].number,expression:"customers[1].number"}],attrs:{placeholder:e.customers[1].placeholderName,eventid:"3780d02a-4"},domProps:{value:e.customers[1].number},on:{input:function(t){t.target.composing||(e.customers[1].number=t.target.value)}}})]),e._v(e._s(e.customers[1].ending))],1),r("view",{staticClass:"content-main"},[r("checkbox",{attrs:{checked:e.customers[2].checked,eventid:"3780d02a-5"},on:{click:function(t){e.switchchecked(2)}}}),e._v(e._s(e.customers[2].title)),r("view",{staticClass:"input-wrapper"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.customers[2].number,expression:"customers[2].number"}],attrs:{placeholder:e.customers[2].placeholderName,eventid:"3780d02a-6"},domProps:{value:e.customers[2].number},on:{input:function(t){t.target.composing||(e.customers[2].number=t.target.value)}}})]),e._v(e._s(e.customers[2].ending))],1)]),r("text",{staticClass:"text-content"},[e._v("选项:")]),r("checkbox-group",{attrs:{mpcomid:"3780d02a-3"}},[r("view",{staticClass:"content-main"},[r("checkbox",{attrs:{checked:e.checkedBottom,eventid:"3780d02a-7"},on:{click:e.checkedbottom}},[e._v("检测重复发布者")])],1),r("view",{staticClass:"content-main"},[r("checkbox",{attrs:{checked:"true"}},[e._v("筛选从最符合条件者开始")])],1),r("view",{staticClass:"content-main"},[r("checkbox",{attrs:{checked:"true"}},[e._v("提示该用户活动期间第几次发布")])],1)]),r("button",{staticClass:"btn",attrs:{eventid:"3780d02a-8"},on:{click:e.readySelect}},[e._v("进行预筛选")])],1),e.showed?r("view",{staticClass:"dialog-cover"},[r("view",{staticClass:"dialog-content"},[e._m(0),r("view",{staticClass:"dialog-main"},[r("view",{staticClass:"text-content"},[e._v("本次活动共"+e._s(e.number)+"人参与;")]),r("view",{staticClass:"text-content"},[e._v("符合筛选条件的内容"+e._s(e.number)+"篇;")]),r("view",{staticClass:"text-content"},[e._v("其中重复发布"+e._s(e.repeat)+"篇;")]),r("view",{staticClass:"text-content"},[e._v("...")])]),r("view",{staticClass:"dialog-content-1"},[r("button",{staticClass:"btn-1",attrs:{eventid:"3780d02a-9"},on:{click:e.submit}},[e._v("开始筛选")])],1),r("view",{staticClass:"dialog-content-2"},[r("button",{staticClass:"btn-1",staticStyle:{background:"green"},attrs:{eventid:"3780d02a-10"},on:{click:e.renewClick}},[e._v("重新设置筛选条件")])],1)])]):e._e()])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("view",{staticClass:"dialog-content-title"},[r("view",{staticClass:"text-content"},[e._v("预筛选结果")])])}];r.d(t,"a",function(){return a}),r.d(t,"b",function(){return n})},bddd:function(e,t,r){"use strict";var a=r("a2ae"),n=r.n(a);n.a},e2e0:function(e,t,r){"use strict";r.r(t);var a=r("9c5b"),n=r.n(a);for(var s in a)"default"!==s&&function(e){r.d(t,e,function(){return a[e]})}(s);t["default"]=n.a}},[["656c","common/runtime","common/vendor"]]]);